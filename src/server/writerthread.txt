class WriterThread extends Thread {

        private PrintWriter writer;

        public WriterThread() {
            // empty constructor
        }

        protected void createStream() throws IOException {
            writer = new PrintWriter(new BufferedOutputStream(socket.getOutputStream()));
        }

        protected void write(String message) { //if we want to programmatically write something
            writer.println(message);
            writer.flush();
        }

        protected void sendFile(String fileName) {
            String line;
            try {
                BufferedReader file = new BufferedReader(new InputStreamReader(new FileInputStream(fileName), Charset.forName("UTF-8")));
                MessageUtils.sendMessage(writer, MessageUtils.makeIncomingFileMessage(fileName));
                while ((line = file.readLine()) != null) {
                    MessageUtils.sendMessage(writer, MessageUtils.makeFileLineMessage(fileName, line));
                }
            } catch (IOException e) {
                System.err.println("Could not open file! Error thrown: " + e);
            }
        }

        public void run() {

        }

        public void close() {
            try {
                
                if (writer != null) {
                    writer.close();
                }
            } catch (Exception e) {
                System.err.println("Error closing writer! Error thrown: " + e);
            }
        }

        public PrintWriter getWriter() {
            return writer;
        }

    } // end class 